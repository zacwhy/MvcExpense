@using MvcExpense.MvcExpenseHelper
@model MvcExpense.UI.Models.Display.SiteMapNodeCreateDisplay

@{
    Layout = "~/Views/Shared/_CreateFormLayout.cshtml";
    Html.Assets().Scripts.Add( "/Scripts/Jit/jit.js" );
    Html.Assets().Scripts.Add( "/Scripts/Views/SiteMapNode/Edit.js" );
}

<script language="javascript" type="text/javascript">
    var tree = @Model.TreeJson;
</script>

@using ( Html.BeginForm() )
{
    @Html.ValidationSummary( true )
    <fieldset>
        <legend>Site Map Node</legend>
        
        <div class="editor-label">
            @Html.LabelFor( model => model.Url )
        </div>
        <div class="editor-field">
            @Html.EditorFor( model => model.Url )
            @Html.ValidationMessageFor( model => model.Url )
        </div>
        
        <div class="editor-label">
            @Html.LabelFor( model => model.Title )
        </div>
        <div class="editor-field">
            @Html.EditorFor( model => model.Title )
            @Html.ValidationMessageFor( model => model.Title )
        </div>
        
        <div class="editor-label">
            @Html.LabelFor( model => model.Description )
        </div>
        <div class="editor-field">
            @Html.EditorFor( model => model.Description )
            @Html.ValidationMessageFor( model => model.Description )
        </div>
        
        <div class="editor-label">
            @Html.LabelFor( model => model.ParentId, "Parent" )
        </div>
        <div class="editor-field">
            @Html.DropDownListFor( model => model.ParentId, Model.ParentSelectList, SystemParameters.DropDownListNullDisplay )
            @Html.ValidationMessageFor( model => model.ParentId )
        </div>

        <div id="DivPreviousSibling">
            <div class="editor-label">
                @Html.LabelFor( model => model.PreviousSiblingId, "Place after" )
            </div>
            <div class="editor-field">
                @Html.DropDownListFor( model => model.PreviousSiblingId, new List<SelectListItem>() )
                @*todo SelectListItemCollection.Empty*@
            </div>
        </div>
        
        <p>
            @Html.SubmitButton( "action", "Create", new { accesskey = "C" } )
        </p>
    </fieldset>
}
